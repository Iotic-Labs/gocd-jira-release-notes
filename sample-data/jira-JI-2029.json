{
  "expand": "renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations",
  "id": "20876",
  "self": "https://<account>.atlassian.net/rest/agile/1.0/issue/20876",
  "key": "JI-2029",
  "fields": {
    "statuscategorychangedate": "2021-03-09T09:37:10.661+0000",
    "customfield_10070": null,
    "customfield_10071": null,
    "customfield_10072": null,
    "customfield_10073": null,
    "customfield_10074": null,
    "customfield_10075": null,
    "customfield_10076": null,
    "fixVersions": [],
    "customfield_10110": null,
    "customfield_10077": null,
    "customfield_10078": null,
    "customfield_10079": null,
    "resolution": {
      "self": "https://<account>.atlassian.net/rest/api/2/resolution/10000",
      "id": "10000",
      "description": "Work has been completed on this issue.",
      "name": "Done"
    },
    "customfield_10104": null,
    "customfield_10105": null,
    "customfield_10106": null,
    "customfield_10107": null,
    "customfield_10109": {
      "self": "https://<account>.atlassian.net/rest/api/2/customFieldOption/10163",
      "value": "No",
      "id": "10163"
    },
    "lastViewed": "2021-03-09T09:37:10.583+0000",
    "customfield_10060": null,
    "customfield_10061": null,
    "customfield_10062": null,
    "customfield_10063": null,
    "customfield_10064": null,
    "customfield_10065": null,
    "epic": {
      "id": 20817,
      "key": "JI-2010",
      "self": "https://<account>.atlassian.net/rest/agile/1.0/epic/20817",
      "name": "regular maintenance",
      "summary": "regular maintenance",
      "color": { "key": "color_2" },
      "done": false
    },
    "customfield_10066": null,
    "customfield_10067": null,
    "priority": {
      "self": "https://<account>.atlassian.net/rest/api/2/priority/3",
      "iconUrl": "https://<account>.atlassian.net/images/icons/priorities/medium.svg",
      "name": "Medium",
      "id": "3"
    },
    "customfield_10100": null,
    "customfield_10101": null,
    "customfield_10068": null,
    "customfield_10102": null,
    "customfield_10069": null,
    "customfield_10103": null,
    "labels": ["Sprint_Goal_Related", "debugging", "must-have", "tests"],
    "aggregatetimeoriginalestimate": null,
    "timeestimate": null,
    "versions": [],
    "issuelinks": [
      {
        "id": "20895",
        "self": "https://<account>.atlassian.net/rest/api/2/issueLink/20895",
        "type": {
          "id": "10003",
          "name": "Relates",
          "inward": "relates to",
          "outward": "relates to",
          "self": "https://<account>.atlassian.net/rest/api/2/issueLinkType/10003"
        },
        "outwardIssue": {
          "id": "19991",
          "key": "JI-1786",
          "self": "https://<account>.atlassian.net/rest/api/2/issue/19991",
          "fields": {
            "summary": "Iotic-service-metadata: run while true, not while connected",
            "status": {
              "self": "https://<account>.atlassian.net/rest/api/2/status/10013",
              "description": "",
              "iconUrl": "https://<account>.atlassian.net/",
              "name": "Done",
              "id": "10013",
              "statusCategory": {
                "self": "https://<account>.atlassian.net/rest/api/2/statuscategory/3",
                "id": 3,
                "key": "done",
                "colorName": "green",
                "name": "Done"
              }
            },
            "priority": {
              "self": "https://<account>.atlassian.net/rest/api/2/priority/1",
              "iconUrl": "https://<account>.atlassian.net/images/icons/priorities/highest.svg",
              "name": "Highest",
              "id": "1"
            },
            "issuetype": {
              "self": "https://<account>.atlassian.net/rest/api/2/issuetype/10004",
              "id": "10004",
              "description": "A problem or error.",
              "iconUrl": "https://<account>.atlassian.net/secure/viewavatar?size=medium&avatarId=10303&avatarType=issuetype",
              "name": "Bug",
              "subtask": false,
              "avatarId": 10303
            }
          }
        }
      },
      {
        "id": "20946",
        "self": "https://<account>.atlassian.net/rest/api/2/issueLink/20946",
        "type": {
          "id": "10003",
          "name": "Relates",
          "inward": "relates to",
          "outward": "relates to",
          "self": "https://<account>.atlassian.net/rest/api/2/issueLinkType/10003"
        },
        "inwardIssue": {
          "id": "20530",
          "key": "JI-1943",
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20530",
          "fields": {
            "summary": "iotic-service-eventbus - flaky remote feed share integration test",
            "status": {
              "self": "https://<account>.atlassian.net/rest/api/2/status/10036",
              "description": "",
              "iconUrl": "https://<account>.atlassian.net/images/icons/statuses/generic.png",
              "name": "To Do",
              "id": "10036",
              "statusCategory": {
                "self": "https://<account>.atlassian.net/rest/api/2/statuscategory/2",
                "id": 2,
                "key": "new",
                "colorName": "blue-gray",
                "name": "To Do"
              }
            },
            "priority": {
              "self": "https://<account>.atlassian.net/rest/api/2/priority/3",
              "iconUrl": "https://<account>.atlassian.net/images/icons/priorities/medium.svg",
              "name": "Medium",
              "id": "3"
            },
            "issuetype": {
              "self": "https://<account>.atlassian.net/rest/api/2/issuetype/10004",
              "id": "10004",
              "description": "A problem or error.",
              "iconUrl": "https://<account>.atlassian.net/secure/viewavatar?size=medium&avatarId=10303&avatarType=issuetype",
              "name": "Bug",
              "subtask": false,
              "avatarId": 10303
            }
          }
        }
      }
    ],
    "assignee": null,
    "status": {
      "self": "https://<account>.atlassian.net/rest/api/2/status/10013",
      "description": "",
      "iconUrl": "https://<account>.atlassian.net/",
      "name": "Done",
      "id": "10013",
      "statusCategory": {
        "self": "https://<account>.atlassian.net/rest/api/2/statuscategory/3",
        "id": 3,
        "key": "done",
        "colorName": "green",
        "name": "Done"
      }
    },
    "components": [
      {
        "self": "https://<account>.atlassian.net/rest/api/2/component/10089",
        "id": "10089",
        "name": "iotic-host"
      },
      {
        "self": "https://<account>.atlassian.net/rest/api/2/component/10095",
        "id": "10095",
        "name": "iotic-service-metadata"
      },
      {
        "self": "https://<account>.atlassian.net/rest/api/2/component/10097",
        "id": "10097",
        "name": "iotic-service-redis"
      }
    ],
    "customfield_10050": null,
    "customfield_10052": null,
    "customfield_10053": null,
    "customfield_10054": null,
    "customfield_10057": {
      "self": "https://<account>.atlassian.net/rest/api/2/customFieldOption/10023",
      "value": "1 - High",
      "id": "10023"
    },
    "customfield_10058": null,
    "customfield_10059": null,
    "customfield_10049": null,
    "aggregatetimeestimate": null,
    "creator": {
      "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
      "accountId": "5cae1b1c055f3f7a1824c427",
      "emailAddress": "top.dev@iotics.com",
      "avatarUrls": {
        "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
        "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
        "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
        "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
      },
      "displayName": "Top Dev",
      "active": true,
      "timeZone": "Europe/London",
      "accountType": "atlassian"
    },
    "subtasks": [],
    "reporter": {
      "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
      "accountId": "5cae1b1c055f3f7a1824c427",
      "emailAddress": "top.dev@iotics.com",
      "avatarUrls": {
        "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
        "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
        "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
        "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
      },
      "displayName": "Top Dev",
      "active": true,
      "timeZone": "Europe/London",
      "accountType": "atlassian"
    },
    "customfield_10043": null,
    "aggregateprogress": { "progress": 0, "total": 0 },
    "customfield_10044": null,
    "customfield_10045": null,
    "customfield_10046": null,
    "customfield_10047": null,
    "customfield_10048": [],
    "customfield_10038": null,
    "closedSprints": [
      {
        "id": 320,
        "self": "https://<account>.atlassian.net/rest/agile/1.0/sprint/320",
        "state": "closed",
        "name": "Iotics Core Sprint 43",
        "startDate": "2021-02-17T12:10:42.913Z",
        "endDate": "2021-03-03T09:08:00.000Z",
        "completeDate": "2021-03-03T09:14:21.033Z",
        "originBoardId": 118,
        "goal": "Goal: Complete POC and progress knowledge transfer\nSprint Champion: Best Dev"
      }
    ],
    "progress": { "progress": 0, "total": 0 },
    "votes": {
      "self": "https://<account>.atlassian.net/rest/api/2/issue/JI-2029/votes",
      "votes": 0,
      "hasVoted": false
    },
    "worklog": { "startAt": 0, "maxResults": 20, "total": 0, "worklogs": [] },
    "issuetype": {
      "self": "https://<account>.atlassian.net/rest/api/2/issuetype/10004",
      "id": "10004",
      "description": "A problem or error.",
      "iconUrl": "https://<account>.atlassian.net/secure/viewavatar?size=medium&avatarId=10303&avatarType=issuetype",
      "name": "Bug",
      "subtask": false,
      "avatarId": 10303
    },
    "timespent": null,
    "sprint": {
      "id": 327,
      "self": "https://<account>.atlassian.net/rest/agile/1.0/sprint/327",
      "state": "active",
      "name": "Host Sprint 44",
      "startDate": "2021-03-03T12:07:09.624Z",
      "endDate": "2021-03-17T09:00:00.000Z",
      "originBoardId": 118,
      "goal": "Complete FPP preparation & set-up in order to onboard external users. Sprint champion: Tim"
    },
    "project": {
      "self": "https://<account>.atlassian.net/rest/api/2/project/10032",
      "id": "10032",
      "key": "FO",
      "name": "Host",
      "projectTypeKey": "software",
      "simplified": false,
      "avatarUrls": {
        "48x48": "https://<account>.atlassian.net/secure/projectavatar?pid=10032&avatarId=10614",
        "24x24": "https://<account>.atlassian.net/secure/projectavatar?size=small&s=small&pid=10032&avatarId=10614",
        "16x16": "https://<account>.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10032&avatarId=10614",
        "32x32": "https://<account>.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10032&avatarId=10614"
      },
      "projectCategory": {
        "self": "https://<account>.atlassian.net/rest/api/2/projectCategory/10003",
        "id": "10003",
        "description": "",
        "name": "Engineering"
      }
    },
    "customfield_10033": 0.0,
    "aggregatetimespent": null,
    "customfield_10034": null,
    "customfield_10035": null,
    "customfield_10036": null,
    "customfield_10037": null,
    "customfield_10027": null,
    "customfield_10028": null,
    "resolutiondate": "2021-03-09T09:37:10.619+0000",
    "workratio": -1,
    "issuerestriction": { "issuerestrictions": {}, "shouldDisplay": false },
    "watches": {
      "self": "https://<account>.atlassian.net/rest/api/2/issue/JI-2029/watchers",
      "watchCount": 2,
      "isWatching": true
    },
    "created": "2021-03-01T13:39:27.115+0000",
    "customfield_10020": "10129_*:*_1_*:*_2518940_*|*_1_*:*_1_*:*_25613_*|*_3_*:*_3_*:*_212644992_*|*_10030_*:*_1_*:*_2868_*|*_10032_*:*_1_*:*_364054744_*|*_10013_*:*_1_*:*_0_*|*_10036_*:*_2_*:*_97411423_*|*_10038_*:*_1_*:*_5029",
    "customfield_10021": [
      {
        "id": 320,
        "name": "Iotics Core Sprint 43",
        "state": "closed",
        "boardId": 118,
        "goal": "Goal: Complete POC and progress knowledge transfer\nSprint Champion: Best Dev",
        "startDate": "2021-02-17T12:10:42.913Z",
        "endDate": "2021-03-03T09:08:00.000Z",
        "completeDate": "2021-03-03T09:14:21.033Z"
      },
      {
        "id": 327,
        "name": "Host Sprint 44",
        "state": "active",
        "boardId": 118,
        "goal": "Complete FPP preparation & set-up in order to onboard external users. Sprint champion: Tim",
        "startDate": "2021-03-03T12:07:09.624Z",
        "endDate": "2021-03-17T09:00:00.000Z"
      }
    ],
    "customfield_10022": "1|i000pj:",
    "customfield_10025": null,
    "customfield_10026": 0.5,
    "customfield_10016": null,
    "customfield_10017": null,
    "customfield_10018": {
      "hasEpicLinkFieldDependency": false,
      "showField": false,
      "nonEditableReason": {
        "reason": "EPIC_LINK_SHOULD_BE_USED",
        "message": "To set an epic as the parent, use the epic link instead"
      }
    },
    "customfield_10019": "2021-03-08T14:10:01.285+0000",
    "updated": "2021-03-09T09:37:10.660+0000",
    "customfield_10090": null,
    "customfield_10095": null,
    "timeoriginalestimate": null,
    "description": "[https://gocd.server/go/tab/build/detail/iotic-node-dev-test/440/run/1/test-host-qapi|https://gocd.server/go/tab/build/detail/iotic-node-dev-test/440/run/1/test-host-qapi]\n\nThese [have been failing|https://gocd.server/go/pipelines/iotic-node-dev-test/430/run/1] since 25/03. Will collect logs etc.\n\n----\n\n* [Pipeline run analysed|https://gocd.server/go/tab/build/detail/iotic-node-dev-test/444/run/2/test-host-qapi] \n* Approximate time of failure (linked above): {{2021-03-03T14:53:60Z}}\n* Chart version: [*2.0.386*|https://gocd.server/go/pipelines/value_stream_map/iotic-node-dev-test/444]",
    "customfield_10097": null,
    "customfield_10010": null,
    "customfield_10099": null,
    "customfield_10014": "JI-2010",
    "customfield_10015": null,
    "customfield_10005": null,
    "customfield_10006": null,
    "security": null,
    "customfield_10007": null,
    "customfield_10008": null,
    "attachment": [
      {
        "self": "https://<account>.atlassian.net/rest/api/2/attachment/10779",
        "id": "10779",
        "filename": "iotic-node-dev-ndev01-iotic-node-eventbus-d69957d89-v6dlb-2021-03-03T144900Z-2021-03-03T150000Z.log",
        "author": {
          "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
          "accountId": "5cae1b1c055f3f7a1824c427",
          "emailAddress": "top.dev@iotics.com",
          "avatarUrls": {
            "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
            "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
            "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
            "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
          },
          "displayName": "Top Dev",
          "active": true,
          "timeZone": "Europe/London",
          "accountType": "atlassian"
        },
        "created": "2021-03-03T15:16:28.816+0000",
        "size": 217829,
        "mimeType": "text/plain",
        "content": "https://<account>.atlassian.net/secure/attachment/10779/iotic-node-dev-ndev01-iotic-node-eventbus-d69957d89-v6dlb-2021-03-03T144900Z-2021-03-03T150000Z.log"
      },
      {
        "self": "https://<account>.atlassian.net/rest/api/2/attachment/10780",
        "id": "10780",
        "filename": "iotic-node-dev-ndev01-iotic-node-metadata-7bf664b759-v4zqc-2021-03-03T144900Z-2021-03-03T150000Z.log",
        "author": {
          "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
          "accountId": "5cae1b1c055f3f7a1824c427",
          "emailAddress": "top.dev@iotics.com",
          "avatarUrls": {
            "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
            "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
            "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
            "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
          },
          "displayName": "Top Dev",
          "active": true,
          "timeZone": "Europe/London",
          "accountType": "atlassian"
        },
        "created": "2021-03-03T15:16:28.870+0000",
        "size": 67188,
        "mimeType": "text/plain",
        "content": "https://<account>.atlassian.net/secure/attachment/10780/iotic-node-dev-ndev01-iotic-node-metadata-7bf664b759-v4zqc-2021-03-03T144900Z-2021-03-03T150000Z.log"
      },
      {
        "self": "https://<account>.atlassian.net/rest/api/2/attachment/10782",
        "id": "10782",
        "filename": "pods.log",
        "author": {
          "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
          "accountId": "5cae1b1c055f3f7a1824c427",
          "emailAddress": "top.dev@iotics.com",
          "avatarUrls": {
            "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
            "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
            "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
            "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
          },
          "displayName": "Top Dev",
          "active": true,
          "timeZone": "Europe/London",
          "accountType": "atlassian"
        },
        "created": "2021-03-03T15:31:49.876+0000",
        "size": 3649,
        "mimeType": "text/plain",
        "content": "https://<account>.atlassian.net/secure/attachment/10782/pods.log"
      },
      {
        "self": "https://<account>.atlassian.net/rest/api/2/attachment/10781",
        "id": "10781",
        "filename": "redis_clients.log",
        "author": {
          "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
          "accountId": "5cae1b1c055f3f7a1824c427",
          "emailAddress": "top.dev@iotics.com",
          "avatarUrls": {
            "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
            "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
            "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
            "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
          },
          "displayName": "Top Dev",
          "active": true,
          "timeZone": "Europe/London",
          "accountType": "atlassian"
        },
        "created": "2021-03-03T15:28:47.737+0000",
        "size": 5707,
        "mimeType": "text/plain",
        "content": "https://<account>.atlassian.net/secure/attachment/10781/redis_clients.log"
      }
    ],
    "customfield_10009": null,
    "flagged": false,
    "summary": "iotic-node-dev-test pipeline failure",
    "customfield_10080": null,
    "customfield_10081": null,
    "customfield_10082": null,
    "customfield_10083": null,
    "customfield_10085": null,
    "customfield_10087": null,
    "customfield_10000": "{pullrequest={dataType=pullrequest, state=MERGED, stateCount=1}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2021-03-08T14:09:15.000+0000\",\"stateCount\":1,\"state\":\"MERGED\",\"dataType\":\"pullrequest\",\"open\":false},\"byInstanceType\":{\"GitHub\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}",
    "customfield_10088": null,
    "customfield_10089": null,
    "customfield_10001": {
      "id": "64",
      "title": "Iotics Foundation Team",
      "isShared": true
    },
    "customfield_10002": null,
    "customfield_10003": null,
    "customfield_10004": null,
    "environment": null,
    "duedate": null,
    "comment": {
      "comments": [
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24648",
          "id": "24648",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "[~accountid:5de4decccdc2d20d0537ed7e] - should I be adding points to such a ticket?",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-01T13:39:49.971+0000",
          "updated": "2021-03-01T13:39:49.971+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24659",
          "id": "24659",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Paused looking at this at ~1410 to help with graph perf ticket",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-01T22:23:36.358+0000",
          "updated": "2021-03-01T22:23:36.358+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24733",
          "id": "24733",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Currently blocked by [this|https://iotic-labs.slack.com/archives/C374FQFFT/p1614778761060100] - Loki logs cannot be retrieved.\n(Trying to fetch logs over a very short amount of time for a specific pod without wildcards [also fails|https://mon.cor.corp.iotic/explore?orgId=1&left=%5B%221614602700000%22,%221614602705000%22,%22loki-vesta%22,%7B%22expr%22:%22%7Bnamespace%3D%5C%22iotic-node-dev%5C%22,instance%3D%5C%22ndev01-iotic-node-eventbus-d69957d89-v6dlb%5C%22%7D%22,%22requestId%22:%22Q-2feb4c0b-aff0-4f41-ab57-c9161249091c-0A%22%7D%5D].)",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-03T13:41:13.747+0000",
          "updated": "2021-03-03T14:24:57.098+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24741",
          "id": "24741",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Will look at logs from most recent failure (hopefully won’t need historical previous logs to help determine what went wrong)\n\n*Edit*: Logs from yesterday also inaccessible - re-running the failing tests",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-03T14:44:15.613+0000",
          "updated": "2021-03-03T14:58:31.862+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24742",
          "id": "24742",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Looking at test failure for:\n\n{noformat}tests/scenario/auth/test_auth_over_rest.py::test_rest_entity_call_with_delegation_fails_without_delegation_and_returns_forbidden[delete_twin]{noformat}\n\n# Request can be seen in rest logs (not included)\n## Client times out request after 60s (See client-ref {{PlopEntityForbidden}})\n# Request arrives in eventbus (txref {{hts69iX9JBm6tcwsaD69Jc}})\n## Strategy started\n## Resource DB part of strategy completed\n## Request submitted to metadata service\n## No response received within 5 minutes\n### Queue: {{/resources/metadata/responses/BxLAphcZ7vQoywZJBey47n}}\n## In the mean time entity server stops waiting for strategy response after 60s (In line with client timeout)\n# Metadata service does not respond within 5 min\n## Logs indicate that no longer listening to any request queue (or at least not processing)\n\n----\n\nRedis client logs show 18 connections by meta service ({{100.98.128.13}}), all with the same status flags:\n{{age=530701 idle=530701 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=NULL}}\n\nThis means that they have all been idle for just under 6d 3h & 30 minutes. If the clients were trying to process events, one would expect {{flags}} to include {{b}} - which it does not. Additionally the connections have been idle for the whole lifetime, it would appear.\n\n*Edit*: Looks like there should be 9 clients with {{flags=b}} when things are working as expected - the rest are for e.g. writing responses.\n\nLooks like somewhere around {{2021-02-25 12:03:30}} a new connection to Redis was created, yet it has never tried to perform a blocking read (for requests).\n\nEvidently Redis was last restarted at {{2021-02-25 12:01:17}} (due to a commit for [https://<account>.atlassian.net/browse/JI-2019|https://<account>.atlassian.net/browse/JI-2019|smart-link] ).\n\nMetadata service version is: *1.0.109*",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-03T15:21:49.907+0000",
          "updated": "2021-03-03T22:12:05.877+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24746",
          "id": "24746",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Cannot retrieve logs for metadata service around the time of redis restart [due to above Loki issue|https://<account>.atlassian.net/browse/JI-2029?focusedCommentId=24733]\n\n*Edit*: Logs around {{2021-02-25 12:01:17}} seem to [no longer be available|https://iotic-labs.slack.com/archives/C374FQFFT/p1614807073064100?thread_ts=1614778761.060100&cid=C374FQFFT].",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-03T15:53:04.206+0000",
          "updated": "2021-03-03T21:39:07.383+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24755",
          "id": "24755",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "It might be worth updating the Python services to allow for remote debugging to be enabled, e.g. via [https://github.com/ionelmc/python-remote-pdb|https://github.com/ionelmc/python-remote-pdb|smart-link]  Looks like said lib has no extra dependencies and [could be triggered|https://github.com/ionelmc/python-remote-pdb#integration-with-breakpoint-in-python-37] by a single {{breakpoint()}} call. This could be:\n\n# {{kubectl}} port-forward to hit some internal API which would call {{breakpoint()}} and thus trigger remote-pdf to be started against a specific (local-only) port\n# {{kubectl}} port-forward the previously configureed remote pdb port.\n# Debug via telnet (incl listing pending routines)\n\nAlternative: Provide means to e.g. dump output from the following via some internal endpoint (since have mostly coroutines):\n\n{noformat}[*map(asyncio.Task.print_stack, asyncio.Task.all_tasks())]{noformat}\n\n(This might be preferable since it doesn’t require pausing the service via breakpoint)",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-03T22:03:07.777+0000",
          "updated": "2021-03-03T22:03:34.968+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24756",
          "id": "24756",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Reproduced locally:\n\n# Start docker-compose in service meta (with {{restart: always}} disabled for redis)\n# Observe that requests are received, e.g.: {{RPUSH /resources/metadata/requests/iotic.qapi.twin.CreateTwinRequest whatever}}\n# Stop redis\n# Observer numerous logging messages about reconnection attempts(level too high for {{asyncio_redis}}?)\n# After 30s get the following exception for each runner, which terminates the runner\n{noformat}asyncio - ERROR - Task exception was never retrieved\nfuture: <Task finished name='Task-41' coro=<ServiceMetadataRunner.run() done, defined at /usr/local/lib/python3.8/site-packages/iotic/service/metadata/common/runner.py:56> exception=TimeoutError()>\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.8/site-packages/iotic/service/metadata/common/runner.py\", line 65, in run\n    await self.cancellation_token.cancellable_wait(connect_evt.wait(),\n  File \"/usr/local/lib/python3.8/site-packages/cancel_token/token.py\", line 168, in cancellable_wait\n    raise asyncio.TimeoutError()\nasyncio.exceptions.TimeoutError{noformat}\n# Restart redis\n# Observe that redis connections are made again, but since runner loops have terminate - listening for requests has stopped\n\n----\n\nThis is because [here|https://github.com/Iotic-Labs/iotic-service-metadata/pull/70/commits/fe8d2502fedf7c9ab027ec857278349f1d2ea137#diff-82fdbc20faecba3122bd284ee3a4ffb1abde138dc49c4645fba9a2acc71ff2edR65-R66] there is a timeout of 30s specified. One would have to either:\n\n* Catch {{asyncio.exceptions.TimeoutError}} and continue waiting in a loop. (But: This seems unnecessary / a left-over from the when it wasn’t clear yet that one could wait for either the token or connected event.)\n* Just not specify a timeout - [https://github.com/Iotic-Labs/iotic-service-metadata/pull/76|https://github.com/Iotic-Labs/iotic-service-metadata/pull/76|smart-link] \n** With this fix, after step (5) above, requests are received again (regardless of whether redis is unavailable for less/more than 30s)\n** In addition shutdown behaviour does not seem to be affected (but see potential problem below masking this)\n\nh3. Additional observations\n\n* The {{OperationCancelled}} exception does not seem to be raised on shutdown (when waiting for redis re-connection)\n* If one sends either an {{INT}} or {{TERM}} signal (e.g. via {{docker stop}} or {{docker kill -s [INT|TERM]}} ) then one instead gets the following uncaught exception (and the service exits with non-zero return code):\n{noformat}Traceback (most recent call last):\n  File \"/usr/local/lib/python3.8/site-packages/aiohttp/web.py\", line 419, in run_app\n    loop.run_until_complete(_run_app(app,\n  File \"/usr/local/lib/python3.8/asyncio/base_events.py\", line 591, in run_until_complete\n    self._check_closed()\n  File \"/usr/local/lib/python3.8/asyncio/base_events.py\", line 508, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n  File \"/usr/local/lib/python3.8/runpy.py\", line 87, in _run_code\n    exec(code, run_globals)\n  File \"/usr/local/lib/python3.8/site-packages/aiohttp/web.py\", line 502, in <module>\n    main(sys.argv[1:])  # pragma: no cover\n  File \"/usr/local/lib/python3.8/site-packages/aiohttp/web.py\", line 497, in main\n    run_app(app, host=args.hostname, port=args.port, path=args.path)\n  File \"/usr/local/lib/python3.8/site-packages/aiohttp/web.py\", line 439, in run_app\n    loop.run_until_complete(loop.shutdown_asyncgens())\n  File \"/usr/local/lib/python3.8/asyncio/base_events.py\", line 591, in run_until_complete\n    self._check_closed()\n  File \"/usr/local/lib/python3.8/asyncio/base_events.py\", line 508, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed\nsys:1: RuntimeWarning: coroutine '_run_app' was never awaited\nsys:1: RuntimeWarning: coroutine 'BaseEventLoop.shutdown_asyncgens' was never awaited{noformat}",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-03T22:43:38.987+0000",
          "updated": "2021-03-03T22:45:55.549+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24757",
          "id": "24757",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Since [~accountid:5d5aa0d941ab580c26f87807] and [~accountid:5cae1b1ae935e80e41c40506] worked on the original fix ([https://<account>.atlassian.net/browse/JI-1786|https://<account>.atlassian.net/browse/JI-1786|smart-link] ), I would suggest for them to look at both the proposed fix and why shutdown is unclean.",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-03T22:47:36.807+0000",
          "updated": "2021-03-03T22:47:36.807+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24818",
          "id": "24818",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Pending additional review by SB. (I thought of adding a test but it occurred to me that there would have been no test if the timeout had not been specified since it wasn’t intended to stay there. As per above notes - it has been tested manually.)",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5cae1b1c055f3f7a1824c427",
            "accountId": "5cae1b1c055f3f7a1824c427",
            "emailAddress": "top.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5cae1b1c055f3f7a1824c427/7930e210-2623-4e09-bf44-a58ed92eca95/32"
            },
            "displayName": "Top Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-05T09:35:16.196+0000",
          "updated": "2021-03-05T09:35:16.196+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24886",
          "id": "24886",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5de4decccdc2d20d0537ed7e",
            "accountId": "5de4decccdc2d20d0537ed7e",
            "emailAddress": "super.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/32"
            },
            "displayName": "Super Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "Reviewed and merged - will test it today.",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5de4decccdc2d20d0537ed7e",
            "accountId": "5de4decccdc2d20d0537ed7e",
            "emailAddress": "super.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/32"
            },
            "displayName": "Super Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-08T14:10:01.285+0000",
          "updated": "2021-03-08T14:10:01.285+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24887",
          "id": "24887",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5de4decccdc2d20d0537ed7e",
            "accountId": "5de4decccdc2d20d0537ed7e",
            "emailAddress": "super.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/32"
            },
            "displayName": "Super Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "It’s still [broken|https://gocd.server/go/tab/build/detail/iotic-node-dev-test/446/run/1/test-host-qapi]",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5de4decccdc2d20d0537ed7e",
            "accountId": "5de4decccdc2d20d0537ed7e",
            "emailAddress": "super.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/32"
            },
            "displayName": "Super Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-08T14:52:29.048+0000",
          "updated": "2021-03-08T14:52:29.048+0000",
          "jsdPublic": true
        },
        {
          "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment/24918",
          "id": "24918",
          "author": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5de4decccdc2d20d0537ed7e",
            "accountId": "5de4decccdc2d20d0537ed7e",
            "emailAddress": "super.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/32"
            },
            "displayName": "Super Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "body": "… and now it’s fixed.",
          "updateAuthor": {
            "self": "https://<account>.atlassian.net/rest/api/2/user?accountId=5de4decccdc2d20d0537ed7e",
            "accountId": "5de4decccdc2d20d0537ed7e",
            "emailAddress": "super.dev@iotics.com",
            "avatarUrls": {
              "48x48": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/48",
              "24x24": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/24",
              "16x16": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/16",
              "32x32": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5de4decccdc2d20d0537ed7e/03f26581-3776-4be3-b423-03eb5fa2e853/32"
            },
            "displayName": "Super Dev",
            "active": true,
            "timeZone": "Europe/London",
            "accountType": "atlassian"
          },
          "created": "2021-03-09T09:37:05.259+0000",
          "updated": "2021-03-09T09:37:05.259+0000",
          "jsdPublic": true
        }
      ],
      "self": "https://<account>.atlassian.net/rest/api/2/issue/20876/comment",
      "maxResults": 13,
      "total": 13,
      "startAt": 0
    }
  }
}
